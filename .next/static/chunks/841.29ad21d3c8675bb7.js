"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[841],{6841:function(t,e,r){r.d(e,{getPaymentTiers:function(){return s},startPayPalCheckout:function(){return n},startStripeCheckout:function(){return c}});var a=r(3548);let o="https://dramini-api.onrender.com/api/v1";async function c(t){try{a.co.trackEvent("checkout_start",{tierKey:t.tierKey});let e=await fetch("".concat(o,"/user/purchase/checkout/stripe"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error("Stripe checkout failed: ".concat(e.status," ").concat(e.statusText));let r=await e.json();if(r.checkoutUrl)window.location.href=r.checkoutUrl;else throw Error("No checkout URL received from server")}catch(t){throw console.error("Stripe checkout error:",t),a.co.trackEvent("payment_error",{provider:"stripe",error:t instanceof Error?t.message:"Payment failed"}),t}}async function n(t){try{a.co.trackEvent("checkout_start",{tierKey:t.tierKey});let e=await fetch("".concat(o,"/user/purchase/checkout/paypal"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error("PayPal checkout failed: ".concat(e.status," ").concat(e.statusText));let r=await e.json();if(r.checkoutUrl)r.paypalOrderId&&(localStorage.setItem("paypalOrderId",r.paypalOrderId),localStorage.setItem("paypalOrderData",JSON.stringify(r))),window.location.href=r.checkoutUrl;else throw Error("No checkout URL received from server")}catch(t){throw console.error("PayPal payment error:",t),a.co.trackEvent("payment_error",{provider:"paypal",error:t instanceof Error?t.message:"Payment failed"}),t}}async function s(){try{let t=await fetch("".concat(o,"/payment-packages"));if(!t.ok)throw Error("Failed to fetch payment packages: ".concat(t.status," ").concat(t.statusText));return await t.json()}catch(t){throw console.error("Get payment packages error:",t),t}}}}]);