(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9922:function(e,t,s){Promise.resolve().then(s.bind(s,3718))},3718:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var r=s(7437),a=s(2265),n=s(7648),i=s(9116),l=s(9376),o=s(2869),c=s(3247),d=s(2369),m=s(7692),h=s(2489),u=s(6840),x=s(4508),f=s(3548);function g(){var e;let[t,s]=(0,a.useState)(!1),[i,g]=(0,a.useState)(!1),[p,v]=(0,a.useState)(!1),[b,j]=(0,a.useState)(null),[y,N]=(0,a.useState)(!1),w=(0,l.usePathname)();(0,a.useEffect)(()=>{N(!0);{let e=localStorage.getItem("user");if(e)try{j(JSON.parse(e))}catch(e){console.error("Failed to parse user data"),localStorage.removeItem("user")}}},[]),(0,a.useEffect)(()=>{let e=()=>{s(window.scrollY>64)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);let k=e=>{f.co.pageView("/".concat(e.toLowerCase().replace(" ","-"))),g(!1)};return y?(0,r.jsx)("header",{className:(0,x.cn)("fixed top-0 left-0 right-0 z-50 transition-all duration-300",t?"py-2 bg-black/50 backdrop-blur-md border-b border-border":"py-4 bg-transparent"),children:(0,r.jsx)("div",{className:"max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,r.jsx)(n.default,{href:"/",className:"text-2xl font-bold text-primary hover:text-primary/80 transition-colors",onClick:()=>f.co.pageView("/"),children:"Dramini"}),(0,r.jsx)("nav",{className:"hidden md:flex items-center space-x-8",children:[{name:"Browse",href:"/browse"},{name:"Top Charts",href:"/top"},{name:"Categories",href:"/categories"}].map(e=>(0,r.jsx)(n.default,{href:e.href,className:(0,x.cn)("text-sm font-medium transition-colors hover:text-foreground/80",w===e.href?"text-foreground":"text-foreground/60"),onClick:()=>k(e.name),children:e.name},e.name))})]}),(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,r.jsx)(o.z,{variant:"ghost",size:"icon",children:(0,r.jsx)(c.Z,{className:"h-5 w-5"})}),b?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-300",children:[b.coins||0," \uD83E\uDE99"]}),(0,r.jsxs)(o.z,{variant:"ghost",className:"flex items-center gap-2",onClick:()=>v(!p),children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-sm font-bold",children:(null===(e=b.name)||void 0===e?void 0:e.charAt(0).toUpperCase())||"U"})}),(0,r.jsx)("span",{className:"text-white",children:b.name||"User"})]})]}),p&&(0,r.jsx)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-gray-900 border border-gray-700 rounded-md shadow-lg z-50",children:(0,r.jsxs)("div",{className:"py-1",children:[(0,r.jsxs)(n.default,{href:"/account",className:"flex items-center px-4 py-2 text-white hover:bg-gray-800",onClick:()=>v(!1),children:[(0,r.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),"My Account"]}),(0,r.jsx)(n.default,{href:"/coins",className:"flex items-center px-4 py-2 text-white hover:bg-gray-800",onClick:()=>v(!1),children:"\uD83E\uDE99 Buy Coins"}),(0,r.jsx)("hr",{className:"border-gray-700 my-1"}),(0,r.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-red-400 hover:bg-gray-800",onClick:()=>{j(null),localStorage.removeItem("user"),localStorage.removeItem("token"),v(!1)},children:[(0,r.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.default,{href:"/auth/signin",children:(0,r.jsx)(o.z,{variant:"ghost",children:"Sign In"})}),(0,r.jsx)(n.default,{href:"/auth/signup",children:(0,r.jsx)(o.z,{className:"bg-primary hover:bg-primary/90",children:"Sign Up"})})]})]}),(0,r.jsx)(o.z,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>g(!i),children:i?(0,r.jsx)(h.Z,{className:"h-6 w-6"}):(0,r.jsx)(u.Z,{className:"h-6 w-6"})})]})})}):(0,r.jsx)("header",{className:"fixed top-0 left-0 right-0 z-50 py-4 bg-transparent",children:(0,r.jsx)("div",{className:"max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsx)(n.default,{href:"/",className:"text-2xl font-bold text-primary",children:"Dramini"}),(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,r.jsx)(o.z,{variant:"ghost",children:"Sign In"}),(0,r.jsx)(o.z,{className:"bg-primary hover:bg-primary/90",children:"Sign Up"})]})]})})})}var p=s(3145),v=s(3287);let b=[{id:"default",slug:"default",title:"Welcome to Dramini",tagline:"Discover amazing content",backdrop:"https://images.unsplash.com/photo-1748091301969-578c45de4dea?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1920"}];function j(){let[e,t]=(0,a.useState)(b),[s,i]=(0,a.useState)(0),l=(0,a.useRef)(null);(0,a.useEffect)(()=>{(async function(){try{let e=await fetch("".concat("https://dramini-api.onrender.com/api/v1","/public/hero-banners"));if(e.ok){let s=await e.json();if(console.log("Hero banners API response:",s),s.banners&&s.banners.length>0){let e=s.banners.map(e=>({id:e.id,slug:e.movieId||"default",title:e.title||"Untitled",tagline:e.subtitle||"",backdrop:e.imageUrl||"https://images.unsplash.com/photo-1748091301969-578c45de4dea?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1920"}));t(e),console.log("轮播图数据加载成功:",e)}}}catch(e){console.error("Failed to fetch hero banners:",e)}})()},[]),(0,a.useEffect)(()=>{let t=()=>{l.current=window.setInterval(()=>{i(t=>(t+1)%e.length)},5e3)},s=()=>{l.current&&(clearInterval(l.current),l.current=null)};t();let r=()=>document.hidden?s():t();return document.addEventListener("visibilitychange",r),()=>{s(),document.removeEventListener("visibilitychange",r)}},[e.length]);let o=e[s];return(0,r.jsxs)("section",{className:"relative w-full h-[72vh] md:h-[78vh] lg:h-[82vh] overflow-hidden",role:"region","aria-roledescription":"carousel",children:[(0,r.jsx)(p.default,{src:o.backdrop,alt:o.title,fill:!0,priority:!0,sizes:"100vw",className:"object-cover"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 via-black/40 to-transparent"}),(0,r.jsx)("div",{className:"relative z-10 flex items-center h-full",children:(0,r.jsx)("div",{className:"container mx-auto px-6 lg:px-8",children:(0,r.jsxs)(v.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6},className:"max-w-2xl",children:[(0,r.jsx)("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-4 leading-tight",children:o.title}),o.tagline&&(0,r.jsx)("p",{className:"text-lg md:text-xl text-gray-200 mb-8 leading-relaxed",children:o.tagline}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)(n.default,{href:"/drama/".concat(o.slug),onClick:()=>{f.co.heroCtaClick("watch","hero")},className:"inline-flex items-center justify-center px-8 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg transition-colors duration-200",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{d:"M8 5v10l8-5-8-5z"})}),"立即观看"]}),(0,r.jsxs)("button",{onClick:()=>{f.co.heroCtaClick("watch","hero")},className:"inline-flex items-center justify-center px-8 py-3 bg-transparent border-2 border-white text-white font-semibold rounded-lg hover:bg-white hover:text-black transition-colors duration-200",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"免费试看"]})]})]},o.id)})}),e.length>1&&(0,r.jsx)("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-2",children:e.map((e,t)=>(0,r.jsx)("button",{onClick:()=>i(t),className:"w-3 h-3 rounded-full transition-colors duration-200 ".concat(t===s?"bg-white":"bg-white/50 hover:bg-white/75"),"aria-label":"Go to slide ".concat(t+1)},t))})]})}var y=s(9219),N=s(2351),w=s(7760),k=s(4767);function C(){let e=new Date().getFullYear(),t=[{name:"Facebook",icon:y.Z,href:"#"},{name:"Twitter",icon:N.Z,href:"#"},{name:"Instagram",icon:w.Z,href:"#"},{name:"YouTube",icon:k.Z,href:"#"}];return(0,r.jsx)("footer",{className:"bg-card border-t border-border",children:(0,r.jsxs)("div",{className:"max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-1",children:[(0,r.jsx)(n.default,{href:"/",className:"text-2xl font-bold text-primary mb-4 block",children:"Dramini"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm mb-4",children:"Every second is drama. Discover bite-size vertical short dramas that will keep you hooked."}),(0,r.jsx)("div",{className:"flex space-x-2",children:t.map(e=>{let t=e.icon;return(0,r.jsx)(o.z,{variant:"ghost",size:"icon",className:"h-8 w-8",asChild:!0,children:(0,r.jsx)(n.default,{href:e.href,"aria-label":e.name,children:(0,r.jsx)(t,{className:"h-4 w-4"})})},e.name)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold mb-4",children:"Content"}),(0,r.jsx)("ul",{className:"space-y-2",children:[{name:"Browse",href:"/browse"},{name:"Top Charts",href:"/top"},{name:"Categories",href:"/categories"}].map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(n.default,{href:e.href,className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:e.name})},e.name))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold mb-4",children:"Support"}),(0,r.jsx)("ul",{className:"space-y-2",children:[{name:"Help Center",href:"/help"},{name:"Contact Us",href:"/contact"},{name:"Bug Reports",href:"/bugs"}].map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(n.default,{href:e.href,className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:e.name})},e.name))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold mb-4",children:"Legal"}),(0,r.jsx)("ul",{className:"space-y-2",children:[{name:"Terms of Service",href:"/terms"},{name:"Privacy Policy",href:"/privacy"},{name:"Cookie Policy",href:"/cookies"}].map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(n.default,{href:e.href,className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:e.name})},e.name))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold mb-4",children:"Company"}),(0,r.jsx)("ul",{className:"space-y-2",children:[{name:"About Us",href:"/about"},{name:"Careers",href:"/careers"},{name:"Press",href:"/press"}].map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(n.default,{href:e.href,className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:e.name})},e.name))})]})]}),(0,r.jsx)("div",{className:"border-t border-border mt-8 pt-8",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,r.jsxs)("p",{className:"text-muted-foreground text-sm",children:["\xa9 ",e," Dramini. All rights reserved."]}),(0,r.jsx)("div",{className:"flex items-center space-x-4 mt-4 md:mt-0",children:(0,r.jsx)("span",{className:"text-muted-foreground text-sm",children:"Made with ❤️ for drama lovers"})})]})})]})})}function S(){let[e,t]=(0,a.useState)({trending:[],newReleases:[],categories:[]}),[s,l]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{let e=setTimeout(()=>{console.error("API调用超时"),l(!1),c("API调用超时")},1e4);try{var s,r;l(!0),console.log("API Base URL:","https://dramini-api.onrender.com/api/v1"),console.log("开始获取数据...");let e=await (0,i.a)("/public/titles"),a=await (0,i.a)("/public/hero-banners");console.log("Titles response:",e),console.log("Banners response:",a);let n=e.ok&&(null===(s=e.data)||void 0===s?void 0:s.titles)||[],o=a.ok&&(null===(r=a.data)||void 0===r?void 0:r.banners)||[];console.log("Processed titles:",n),console.log("Processed banners:",o);let d=n.map(e=>({id:e.id,title:e.mainTitle||e.name,poster:e.coverUrl||e.coverImageId||"https://images.unsplash.com/photo-1748091301969-578c45de4dea?w=400&h=600&fit=crop",slug:e.slug}));console.log("Mapped movies:",d),t({trending:d.slice(0,6),newReleases:d.slice(0,6),categories:[{id:"all",name:"全部内容",slug:"all",movies:d}]}),console.log("数据设置完成"),c(null)}catch(e){console.error("获取数据失败:",e),c(e instanceof Error?e.message:"获取数据失败")}finally{clearTimeout(e),l(!1),console.log("加载完成")}})()},[]),s)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-white text-xl",children:"加载中..."})}):o?(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-white text-xl",children:[(0,r.jsxs)("div",{children:["错误: ",o]}),(0,r.jsxs)("div",{className:"text-sm mt-2",children:["API Base URL: ","https://dramini-api.onrender.com/api/v1"]})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,r.jsx)(g,{}),(0,r.jsx)(j,{}),(0,r.jsxs)("div",{className:"px-8 py-12",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-white mb-6",children:"热门内容"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:e.trending.map(e=>(0,r.jsx)(n.default,{href:"/drama/".concat(e.slug),children:(0,r.jsxs)("div",{className:"relative group cursor-pointer",children:[(0,r.jsx)("img",{src:e.poster,alt:e.title,className:"w-full h-64 object-cover rounded-lg transition-transform group-hover:scale-105"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity font-semibold",children:e.title})})]})},e.id))})]}),(0,r.jsxs)("div",{className:"px-8 py-12",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-white mb-6",children:"分类浏览"}),e.categories.map(e=>(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name}),(0,r.jsx)(n.default,{href:"/browse?category=".concat(e.slug),className:"text-red-400 hover:text-red-300 transition-colors",children:"查看全部"})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:e.movies.map((t,s)=>(0,r.jsx)(n.default,{href:"/drama/".concat(t.slug),children:(0,r.jsxs)("div",{className:"relative group cursor-pointer",children:[(0,r.jsx)("img",{src:t.poster,alt:t.title,className:"w-full h-64 object-cover rounded-lg transition-transform group-hover:scale-105"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity font-semibold",children:t.title})})]})},"".concat(e.id,"-").concat(t.id,"-").concat(s)))})]},e.id))]}),(0,r.jsx)(C,{})]})}},2869:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var r=s(7437),a=s(2265),n=s(5293),i=s(535),l=s(4508);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:c=!1,...d}=e,m=c?n.g7:"button";return(0,r.jsx)(m,{className:(0,l.cn)(o({variant:a,size:i,className:s})),ref:t,...d})});c.displayName="Button"},3548:function(e,t,s){"use strict";function r(e,t){if(window.dataLayer){let s={type:e,data:t,timestamp:Date.now()};window.dataLayer.push(s)}}s.d(t,{co:function(){return a}});let a={pageView:function(e,t){r("page_view",{path:e,title:t})},posterClick:function(e,t,s){r("poster_click",{titleId:e,index:t,section:s})},posterImpression:function(e,t,s){r("poster_impression",{titleId:e,index:t,section:s})},categorySelect:function(e){r("category_select",{category:e})},heroCtaClick:function(e,t){r("hero_cta_click",{cta:e,pos:t})},paywallOpen:function(e,t){r("paywall_open",{titleId:e,episode:t})},checkoutStart:function(e,t){r("checkout_start",{planId:e,priceCents:t})},checkoutSuccess:function(e,t,s){r("checkout_success",{planId:e,priceCents:t,sessionId:s})},checkoutCancel:function(e,t){r("checkout_cancel",{planId:e,priceCents:t})},error:function(e,t){r("error",{error:e,context:t})}}},9116:function(e,t,s){"use strict";async function r(e){try{let t=await fetch("".concat("https://dramini-api.onrender.com/api/v1").concat(e));if(!t.ok)return{ok:!1,data:null,error:"HTTP ".concat(t.status)};let s=await t.json();return{ok:!0,data:s}}catch(e){return{ok:!1,data:null,error:e instanceof Error?e.message:"Unknown error"}}}s.d(t,{a:function(){return r}})},4508:function(e,t,s){"use strict";s.d(t,{T4:function(){return i},cn:function(){return n}});var r=s(1994),a=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}function i(e){return"$".concat((e/100).toFixed(2))}}},function(e){e.O(0,[972,413,878,248,971,117,744],function(){return e(e.s=9922)}),_N_E=e.O()}]);