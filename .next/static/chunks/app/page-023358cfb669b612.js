(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9922:function(e,t,s){Promise.resolve().then(s.bind(s,3759))},3759:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var a=s(7437),r=s(2265),l=s(7648),i=s(9116),n=s(4279),c=s(3145);function o(){let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)(0),[n,o]=(0,r.useState)(!0);if((0,r.useEffect)(()=>{(async function(){try{let e=await fetch("".concat("https://dramini-api.onrender.com/api/v1","/public/hero-banners"));if(e.ok){let s=await e.json();if(console.log("Hero banners API response:",s),s.banners&&s.banners.length>0){let e=await fetch("".concat("https://dramini-api.onrender.com/api/v1","/public/titles")),a=await e.json();if(a.titles&&a.titles.length>0){let e=new Map;a.titles.forEach(t=>{e.set(t.id,t.slug)});let r=s.banners.map(t=>({id:t.id,slug:e.get(t.movieId)||t.movieId||"default",title:t.title||"Untitled",tagline:t.subtitle||"",backdrop:t.imageUrl||"https://images.unsplash.com/photo-1748091301969-578c45de4dea?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1920"}));t(r),console.log("轮播图数据加载成功:",r)}}}}catch(e){console.error("Failed to fetch hero banners:",e)}finally{o(!1)}})()},[]),(0,r.useEffect)(()=>{if(e.length>1){let t=setInterval(()=>{i(t=>(t+1)%e.length)},5e3);return()=>clearInterval(t)}},[e]),n)return(0,a.jsx)("div",{className:"relative h-[70vh] bg-gray-900 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-white text-xl",children:"加载中..."})});if(0===e.length)return(0,a.jsx)("div",{className:"relative h-[70vh] bg-gray-900 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-white text-xl",children:"暂无轮播图"})});let d=e[s];return(0,a.jsxs)("div",{className:"relative h-[70vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0",children:[(0,a.jsx)(c.default,{src:d.backdrop,alt:d.title,fill:!0,className:"object-cover",priority:!0}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50"})]}),(0,a.jsx)("div",{className:"relative z-10 h-full flex items-center",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"max-w-2xl",children:[(0,a.jsx)("h1",{className:"text-4xl md:text-6xl font-bold text-white mb-4",children:d.title}),d.tagline&&(0,a.jsx)("p",{className:"text-lg md:text-xl text-gray-200 mb-8",children:d.tagline}),(0,a.jsx)("div",{className:"flex flex-col sm:flex-row gap-4",children:(0,a.jsxs)(l.default,{href:"/drama/".concat(d.slug),onClick:()=>{console.log("Play button clicked")},className:"inline-flex items-center justify-center px-8 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg transition-colors duration-200",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M8 5v10l8-5-8-5z"})}),"立即观看"]})})]})})}),e.length>1&&(0,a.jsx)("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 flex space-x-2",children:e.map((e,t)=>(0,a.jsx)("button",{onClick:()=>i(t),className:"w-3 h-3 rounded-full transition-colors duration-200 ".concat(t===s?"bg-white":"bg-white bg-opacity-50")},t))})]})}var d=s(2869),m=s(9763);let h=(0,m.Z)("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),x=(0,m.Z)("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),u=(0,m.Z)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),f=(0,m.Z)("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);function g(){let e=new Date().getFullYear();return(0,a.jsx)("footer",{className:"bg-card border-t border-border",children:(0,a.jsxs)("div",{className:"max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-1",children:[(0,a.jsx)(l.default,{href:"/",className:"text-2xl font-bold text-primary mb-4 block",children:"Dramini"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm mb-4",children:"Every second is drama. Discover bite-size vertical short dramas that will keep you hooked."}),(0,a.jsx)("div",{className:"flex space-x-2",children:[{name:"Facebook",icon:h,href:"#"},{name:"Twitter",icon:x,href:"#"},{name:"Instagram",icon:u,href:"#"},{name:"YouTube",icon:f,href:"#"}].map(e=>{let t=e.icon;return(0,a.jsx)(d.z,{variant:"ghost",size:"icon",className:"h-8 w-8",asChild:!0,children:(0,a.jsx)(l.default,{href:e.href,"aria-label":e.name,children:(0,a.jsx)(t,{className:"h-4 w-4"})})},e.name)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"Content"}),(0,a.jsx)("ul",{className:"space-y-2",children:[{name:"Browse",href:"/browse"},{name:"Top Charts",href:"/top"},{name:"Categories",href:"/categories"}].map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:e.href,className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:e.name})},e.name))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"Support"}),(0,a.jsx)("ul",{className:"space-y-2",children:[{name:"Help Center",href:"/help"},{name:"Contact Us",href:"/contact"},{name:"Bug Reports",href:"/bugs"}].map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:e.href,className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:e.name})},e.name))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"Legal"}),(0,a.jsx)("ul",{className:"space-y-2",children:[{name:"Terms of Service",href:"/terms"},{name:"Privacy Policy",href:"/privacy"},{name:"Cookie Policy",href:"/cookies"}].map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:e.href,className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:e.name})},e.name))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"Company"}),(0,a.jsx)("ul",{className:"space-y-2",children:[{name:"About Us",href:"/about"},{name:"Careers",href:"/careers"},{name:"Press",href:"/press"}].map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:e.href,className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:e.name})},e.name))})]})]}),(0,a.jsx)("div",{className:"border-t border-border mt-8 pt-8",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,a.jsxs)("p",{className:"text-muted-foreground text-sm",children:["\xa9 ",e," Dramini. All rights reserved."]}),(0,a.jsx)("div",{className:"flex items-center space-x-4 mt-4 md:mt-0",children:(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:"Made with ❤️ for drama lovers"})})]})})]})})}var p=s(9490);function j(){let[e,t]=(0,r.useState)({trending:[],newReleases:[],categories:[]}),[s,c]=(0,r.useState)(!0),[d,m]=(0,r.useState)(null);return((0,p.j)("ShortDramini - 首页"),(0,r.useEffect)(()=>{(async()=>{let e=setTimeout(()=>{console.error("API调用超时"),c(!1),m("API调用超时")},1e4);try{c(!0),console.log("API Base URL:","https://dramini-api.onrender.com/api/v1"),console.log("开始获取数据...");let e=await (0,i.a)("/public/titles"),s=await (0,i.a)("/public/hero-banners");console.log("Titles response:",e),console.log("Banners response:",s);let a=e.ok&&e.data.titles||[],r=s.ok&&s.data.banners||[];console.log("Processed titles:",a),console.log("Processed banners:",r);let l=a.map(e=>({id:e.id,title:e.mainTitle||e.name,poster:e.coverImageId||e.coverUrl||"https://images.unsplash.com/photo-1748091301969-578c45de4dea?w=400&h=600&fit=crop",slug:e.slug}));console.log("Mapped movies:",l),t({trending:l.slice(0,6),newReleases:l.slice(0,6),categories:[{id:"all",name:"全部内容",slug:"all",movies:l}]}),console.log("数据设置完成"),m(null)}catch(e){console.error("获取数据失败:",e),m(e instanceof Error?e.message:"获取数据失败")}finally{clearTimeout(e),c(!1),console.log("加载完成")}})()},[]),s)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-white text-xl",children:"加载中..."})}):d?(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-white text-xl",children:[(0,a.jsxs)("div",{children:["错误: ",d]}),(0,a.jsxs)("div",{className:"text-sm mt-2",children:["API Base URL: ","https://dramini-api.onrender.com/api/v1"]})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,a.jsx)(n.h,{}),(0,a.jsx)(o,{}),(0,a.jsxs)("div",{className:"px-8 py-12",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-white mb-6",children:"热门内容"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:e.trending.map(e=>(0,a.jsx)(l.default,{href:"/drama/".concat(e.slug),children:(0,a.jsxs)("div",{className:"relative group cursor-pointer",children:[(0,a.jsx)("img",{src:e.poster,alt:e.title,className:"w-full h-64 object-cover rounded-lg transition-transform group-hover:scale-105"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity font-semibold",children:e.title})})]})},e.id))})]}),(0,a.jsxs)("div",{className:"px-8 py-12",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-white mb-6",children:"分类浏览"}),e.categories.map(e=>(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name}),(0,a.jsx)(l.default,{href:"/browse?category=".concat(e.slug),className:"text-red-400 hover:text-red-300 transition-colors",children:"查看全部"})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:e.movies.map((t,s)=>(0,a.jsx)(l.default,{href:"/drama/".concat(t.slug),children:(0,a.jsxs)("div",{className:"relative group cursor-pointer",children:[(0,a.jsx)("img",{src:t.poster,alt:t.title,className:"w-full h-64 object-cover rounded-lg transition-transform group-hover:scale-105"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity font-semibold",children:t.title})})]})},"".concat(e.id,"-").concat(t.id,"-").concat(s)))})]},e.id))]}),(0,a.jsx)(g,{})]})}},9116:function(e,t,s){"use strict";async function a(e){try{let t=await fetch("".concat("https://dramini-api.onrender.com/api/v1").concat(e));if(!t.ok)return{ok:!1,data:null,error:"HTTP ".concat(t.status)};let s=await t.json();return{ok:!0,data:s}}catch(e){return{ok:!1,data:null,error:e instanceof Error?e.message:"Unknown error"}}}s.d(t,{a:function(){return a}})},3145:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var a=s(8461),r=s.n(a)},8461:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return c},getImageProps:function(){return n}});let a=s(7043),r=s(5346),l=s(5878),i=a._(s(5084));function n(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let c=l.Image}},function(e){e.O(0,[413,972,878,742,971,117,744],function(){return e(e.s=9922)}),_N_E=e.O()}]);