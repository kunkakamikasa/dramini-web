(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3081:function(t,e,n){Promise.resolve().then(n.t.bind(n,7960,23)),Promise.resolve().then(n.bind(n,1552)),Promise.resolve().then(n.bind(n,7942))},1552:function(t,e,n){"use strict";n.d(e,{AnalyticsProvider:function(){return a}});var i=n(7437),r=n(2265),s=n(3548),o=n(257);function a(t){let{children:e}=t;return(0,r.useEffect)(()=>((0,s.uF)({domain:o.env.NEXT_PUBLIC_DOMAIN||"https://shortdramini.com",endpoint:"".concat("https://dramini-api.onrender.com/api/v1","/analytics"),batchSize:10,flushInterval:2e3,sessionTimeout:18e5,heartbeatInterval:15e3}),()=>{}),[]),(0,i.jsx)(i.Fragment,{children:e})}},7942:function(t,e,n){"use strict";n.d(e,{ToastProvider:function(){return s}});var i=n(7437),r=n(9064);function s(){return(0,i.jsx)(r.x7,{position:"top-center",toastOptions:{duration:4e3,style:{background:"#1f2937",color:"#f9fafb",border:"1px solid #374151",borderRadius:"8px",padding:"12px 16px",fontSize:"14px",fontWeight:"500",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},success:{iconTheme:{primary:"#10b981",secondary:"#f9fafb"},style:{background:"#1f2937",color:"#f9fafb",border:"1px solid #10b981"}},error:{iconTheme:{primary:"#ef4444",secondary:"#f9fafb"},style:{background:"#1f2937",color:"#f9fafb",border:"1px solid #ef4444"}},loading:{iconTheme:{primary:"#3b82f6",secondary:"#f9fafb"},style:{background:"#1f2937",color:"#f9fafb",border:"1px solid #3b82f6"}}}})}},3548:function(t,e,n){"use strict";n.d(e,{IH:function(){return a},co:function(){return c},uF:function(){return o}});var i=n(4147);class r{initAnalytics(t){try{this.initSession(),this.loadUser(),this.apiBase=t.endpoint||"/api/v1/analytics",document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this)),window.addEventListener("beforeunload",this.handleBeforeUnload.bind(this)),console.log("Analytics initialized successfully")}catch(t){console.error("Analytics initialization failed:",t)}}initSession(){let t=localStorage.getItem("dramini_analytics_visitor_id");t||(t=(0,i.Z)(),localStorage.setItem("dramini_analytics_visitor_id",t)),this.visitorId=t;let e="dramini_analytics_",n=localStorage.getItem(e+"session_last_ts"),r=Date.now();!n||r-parseInt(n)>18e5?(this.sessionId=(0,i.Z)(),localStorage.setItem(e+"session_id",this.sessionId)):this.sessionId=localStorage.getItem(e+"session_id")||(0,i.Z)(),localStorage.setItem(e+"session_last_ts",r.toString())}loadUser(){this.userId=localStorage.getItem("dramini_user_id")||null}sendEvent(t){this.eventQueue.push(t),this.eventQueue.length>=5&&this.flushEvents()}flushEvents(){if(0===this.eventQueue.length)return;let t=[...this.eventQueue];this.eventQueue=[];let e=JSON.stringify({events:t});fetch(this.apiBase+"/track",{method:"POST",headers:{"Content-Type":"application/json","x-analytics-key":"dramini2025"},body:e,keepalive:!0}).catch(t=>{console.warn("Analytics flush failed:",t)})}trackEvent(t,e){let n={event_id:(0,i.Z)(),event_name:t,visitor_id:this.visitorId,session_id:this.sessionId,user_id:this.userId||void 0,props:e||{},created_at:new Date().toISOString()};this.sendEvent(n)}trackLogin(t,e){this.trackEvent("login",{user_id:t,method:e||"email"})}trackRegistration(t,e){this.trackEvent("registration",{user_id:t,method:e||"email"})}trackVideoPlay(t,e,n){this.trackEvent("video_play",{content_id:t,content_type:e,duration:n||0})}trackPurchase(t,e,n,i){this.trackEvent("purchase",{order_id:t,amount:e,currency:n,method:i||"unknown"})}trackSearch(t,e){this.trackEvent("search",{query:t,results_count:e||0})}trackShare(t,e,n){this.trackEvent("share",{content_id:t,content_type:e,platform:n||"unknown"})}setUserId(t){this.userId=t,localStorage.setItem("dramini_user_id",t)}handleVisibilityChange(){this.flushEvents()}handleBeforeUnload(){this.flushEvents()}getVisitorId(){return this.visitorId}getSessionId(){return this.sessionId}constructor(){this.visitorId=null,this.sessionId=null,this.userId=null,this.apiBase="",this.eventQueue=[]}}let s=null;function o(t){(s=new r).initAnalytics(t)}function a(){return s}let c={initAnalytics:t=>{o(t)},trackEvent:(t,e)=>{let n=s;n&&n.trackEvent(t,e)},trackLogin:(t,e)=>{let n=s;n&&n.trackLogin(t,e)},trackRegistration:(t,e)=>{let n=s;n&&n.trackRegistration(t,e)},trackVideoPlay:(t,e,n)=>{let i=s;i&&i.trackVideoPlay(t,e,n)},trackPurchase:(t,e,n,i)=>{let r=s;r&&r.trackPurchase(t,e,n,i)},trackSearch:(t,e)=>{let n=s;n&&n.trackSearch(t,e)},trackShare:(t,e,n)=>{let i=s;i&&i.trackShare(t,e,n)},getVisitorId:()=>{let t=s;return t?t.getVisitorId():null},getSessionId:()=>{let t=s;return t?t.getSessionId():null},setUserId:t=>{let e=s;e&&e.setUserId(t)}}},257:function(t,e,n){"use strict";var i,r;t.exports=(null==(i=n.g.process)?void 0:i.env)&&"object"==typeof(null==(r=n.g.process)?void 0:r.env)?n.g.process:n(4227)},4227:function(t){!function(){var e={229:function(t){var e,n,i,r=t.exports={};function s(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===s||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:s}catch(t){e=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var c=[],l=!1,u=-1;function d(){l&&i&&(l=!1,i.length?c=i.concat(c):u=-1,c.length&&h())}function h(){if(!l){var t=a(d);l=!0;for(var e=c.length;e;){for(i=c,c=[];++u<e;)i&&i[u].run();u=-1,e=c.length}i=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}r.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new f(t,e)),1!==c.length||l||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(t){return[]},r.binding=function(t){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function i(t){var r=n[t];if(void 0!==r)return r.exports;var s=n[t]={exports:{}},o=!0;try{e[t](s,s.exports,i),o=!1}finally{o&&delete n[t]}return s.exports}i.ab="//";var r=i(229);t.exports=r}()},7960:function(){}},function(t){t.O(0,[587,996,971,117,744],function(){return t(t.s=3081)}),_N_E=t.O()}]);