(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9922:function(e,s,t){Promise.resolve().then(t.bind(t,7340))},7340:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return n}});var r=t(7437),a=t(2265),i=t(7648),l=t(9116);function n(){let[e,s]=(0,a.useState)({trending:[],newReleases:[],categories:[]}),[t,n]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{let e=setTimeout(()=>{console.error("API调用超时"),n(!1),c("API调用超时")},1e4);try{var t,r;n(!0),console.log("API Base URL:","https://dramini-api.onrender.com/api/v1"),console.log("开始获取数据...");let e=await (0,l.a)("/public/titles"),a=await (0,l.a)("/public/hero-banners");console.log("Titles response:",e),console.log("Banners response:",a);let i=e.ok&&(null===(t=e.data)||void 0===t?void 0:t.titles)||[],o=a.ok&&(null===(r=a.data)||void 0===r?void 0:r.banners)||[];console.log("Processed titles:",i),console.log("Processed banners:",o);let d=i.map(e=>({id:e.id,title:e.mainTitle||e.name,poster:e.coverUrl||e.coverImageId||"https://images.unsplash.com/photo-1748091301969-578c45de4dea?w=400&h=600&fit=crop",slug:e.slug}));console.log("Mapped movies:",d),s({trending:d.slice(0,6),newReleases:d.slice(0,6),categories:[{id:"all",name:"全部内容",slug:"all",movies:d}]}),console.log("数据设置完成"),c(null)}catch(e){console.error("获取数据失败:",e),c(e instanceof Error?e.message:"获取数据失败")}finally{clearTimeout(e),n(!1),console.log("加载完成")}})()},[]),t)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-white text-xl",children:"加载中..."})}):o?(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-white text-xl",children:[(0,r.jsxs)("div",{children:["错误: ",o]}),(0,r.jsxs)("div",{className:"text-sm mt-2",children:["API Base URL: ","https://dramini-api.onrender.com/api/v1"]})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,r.jsxs)("div",{className:"relative h-screen flex items-center justify-center",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-black to-transparent z-10"}),(0,r.jsxs)("div",{className:"relative z-20 text-center text-white",children:[(0,r.jsx)("h1",{className:"text-6xl font-bold mb-4",children:"Dramini"}),(0,r.jsx)("p",{className:"text-xl mb-8",children:"发现精彩内容"}),(0,r.jsx)(i.default,{href:"/browse",className:"bg-red-600 hover:bg-red-700 px-8 py-3 rounded-lg text-lg font-semibold transition-colors",children:"开始观看"})]})]}),(0,r.jsxs)("div",{className:"px-8 py-12",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-white mb-6",children:"热门内容"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:e.trending.map(e=>(0,r.jsx)(i.default,{href:"/drama/".concat(e.slug),children:(0,r.jsxs)("div",{className:"relative group cursor-pointer",children:[(0,r.jsx)("img",{src:e.poster,alt:e.title,className:"w-full h-64 object-cover rounded-lg transition-transform group-hover:scale-105"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity font-semibold",children:e.title})})]})},e.id))})]}),(0,r.jsxs)("div",{className:"px-8 py-12",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-white mb-6",children:"分类浏览"}),e.categories.map(e=>(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name}),(0,r.jsx)(i.default,{href:"/browse?category=".concat(e.slug),className:"text-red-400 hover:text-red-300 transition-colors",children:"查看全部"})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:e.movies.map((s,t)=>(0,r.jsx)(i.default,{href:"/drama/".concat(s.slug),children:(0,r.jsxs)("div",{className:"relative group cursor-pointer",children:[(0,r.jsx)("img",{src:s.poster,alt:s.title,className:"w-full h-64 object-cover rounded-lg transition-transform group-hover:scale-105"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity font-semibold",children:s.title})})]})},"".concat(e.id,"-").concat(s.id,"-").concat(t)))})]},e.id))]})]})}},9116:function(e,s,t){"use strict";async function r(e){try{let s=await fetch("".concat("https://dramini-api.onrender.com/api/v1").concat(e));if(!s.ok)return{ok:!1,data:null,error:"HTTP ".concat(s.status)};let t=await s.json();return{ok:!0,data:t}}catch(e){return{ok:!1,data:null,error:e instanceof Error?e.message:"Unknown error"}}}t.d(s,{a:function(){return r}})},7648:function(e,s,t){"use strict";t.d(s,{default:function(){return a.a}});var r=t(2972),a=t.n(r)}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=9922)}),_N_E=e.O()}]);