"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[841],{3548:function(t,e,c){function o(t,e){if(window.dataLayer){let c={type:t,data:e,timestamp:Date.now()};window.dataLayer.push(c)}}c.d(e,{co:function(){return r}});let r={pageView:function(t,e){o("page_view",{path:t,title:e})},posterClick:function(t,e,c){o("poster_click",{titleId:t,index:e,section:c})},posterImpression:function(t,e,c){o("poster_impression",{titleId:t,index:e,section:c})},categorySelect:function(t){o("category_select",{category:t})},heroCtaClick:function(t,e){o("hero_cta_click",{cta:t,pos:e})},paywallOpen:function(t,e){o("paywall_open",{titleId:t,episode:e})},checkoutStart:function(t,e){o("checkout_start",{planId:t,priceCents:e})},checkoutSuccess:function(t,e,c){o("checkout_success",{planId:t,priceCents:e,sessionId:c})},checkoutCancel:function(t,e){o("checkout_cancel",{planId:t,priceCents:e})},error:function(t,e){o("error",{error:t,context:e})}}},6841:function(t,e,c){c.d(e,{getPaymentTiers:function(){return i},startPayPalCheckout:function(){return n},startStripeCheckout:function(){return a}});var o=c(3548);let r="https://dramini-api.onrender.com/api/v1";async function a(t){try{o.co.checkoutStart(t.tierKey,0);let e=await fetch("".concat(r,"/user/purchase/checkout/stripe"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error("Stripe checkout failed: ".concat(e.status," ").concat(e.statusText));let c=await e.json();if(c.checkoutUrl)window.location.href=c.checkoutUrl;else throw Error("No checkout URL received from server")}catch(t){throw console.error("Stripe checkout error:",t),o.co.error("stripe_checkout_failed",t instanceof Error?t.message:"Payment failed"),t}}async function n(t){try{o.co.checkoutStart(t.tierKey,0);let e=await fetch("".concat(r,"/user/purchase/checkout/paypal"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error("PayPal checkout failed: ".concat(e.status," ").concat(e.statusText));let c=await e.json();if(c.checkoutUrl)window.location.href=c.checkoutUrl;else throw Error("No checkout URL received from server")}catch(t){throw console.error("PayPal payment error:",t),o.co.error("paypal_checkout_failed",t instanceof Error?t.message:"Payment failed"),t}}async function i(){try{let t=await fetch("".concat(r,"/payment-packages"));if(!t.ok)throw Error("Failed to fetch payment packages: ".concat(t.status," ").concat(t.statusText));return await t.json()}catch(t){throw console.error("Get payment packages error:",t),t}}}}]);