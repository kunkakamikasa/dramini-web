"use strict";(()=>{var e={};e.id=2,e.ids=[2],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5562:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h});var s={};t.r(s),t.d(s,{POST:()=>d,dynamic:()=>u});var o=t(9303),a=t(8716),i=t(670),n=t(7070);let u="force-dynamic",p=new Map;async function d(e){try{let{email:r,password:t,name:s,verificationCode:o}=await e.json();if(!r||!t||!s||!o)return n.NextResponse.json({error:"Missing required fields"},{status:400});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))return n.NextResponse.json({error:"Invalid email format"},{status:400});let a=await fetch(`${process.env.NEXT_PUBLIC_WEB_BASE_URL||"http://localhost:3000"}/api/auth/verify-email`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,code:o})});if(!a.ok){let e=await a.json();return n.NextResponse.json({error:e.error||"Invalid verification code"},{status:400})}if(p.has(r))return n.NextResponse.json({error:"User already exists"},{status:400});let i=`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return p.set(r,{id:i,email:r,password:t,name:s,coins:0}),n.NextResponse.json({userId:i,email:r,name:s,coins:0})}catch(e){return console.error("Registration error:",e),n.NextResponse.json({error:"Registration failed"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"/Users/mayingkun/mkwork/cursorproject/H5/Dramini/app/api/auth/register/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:h,serverHooks:m}=c,g="/api/auth/register/route";function f(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[276,972],()=>t(5562));module.exports=s})();